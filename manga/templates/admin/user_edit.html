{% extends "admin/base_admin.html" %}
{% block title %}Edit User â€” {{ target_user.username }}{% endblock %}
{% block admin_content %}
<h1 class="admin-page-title">Edit User</h1>
<p class="text-muted">Editing profile for <strong>{{ target_user.username }}</strong></p>

<form method="POST" class="admin-form" style="max-width:540px;">
  {% csrf_token %}
  <div class="form-grid">
    <div class="form-group full">
      <label>Username *</label>
      <input type="text" name="username" value="{{ target_user.username }}" class="form-input" required>
    </div>
    <div class="form-group full">
      <label>Email *</label>
      <input type="email" name="email" value="{{ target_user.email }}" class="form-input" required>
    </div>
    <div class="form-group">
      <label>Active</label>
      <label class="checkbox-label">
        <input type="checkbox" name="is_active" {% if target_user.is_active %}checked{% endif %}>
        Account is active
      </label>
    </div>
    <div class="form-group">
      <label>Admin</label>
      <label class="checkbox-label">
        <input type="checkbox" name="is_admin" {% if target_user.is_admin %}checked{% endif %}>
        Has admin access
      </label>
    </div>
  </div>

  <div style="margin-top:12px;padding:12px;background:var(--surface);border-radius:var(--radius-sm);font-size:13px;color:var(--muted);">
    <strong>Account Info:</strong><br>
    Joined: {{ target_user.created_at|timesince }} ago<br>
    Last Login: {% if target_user.last_login %}{{ target_user.last_login|timesince }} ago{% else %}Never{% endif %}<br>
    Locked: {% if target_user.is_locked %}<span style="color:var(--warning)">Yes</span>{% else %}No{% endif %}<br>
    Failed Attempts: {{ target_user.failed_login_attempts }}
  </div>

  <div class="form-actions" style="margin-top:16px;">
    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
    <a href="{% url 'admin_reset_password' target_user.id %}" class="btn btn-outline"><i class="fas fa-key"></i> Reset Password</a>
    <a href="{% url 'admin_users' %}" class="btn btn-outline">Cancel</a>
  </div>
</form>
{% endblock %}
